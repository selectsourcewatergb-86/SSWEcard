<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="theme-color" content="#04151f" />
  <title>Greg Buckner | Select Source Water</title>
  <meta name="description" content="Digital eCard for Greg Buckner at Select Source Water. Call, text, email, visit website, book a free water test, and save contact." />

  <style>
    :root{
      --bgA:#04151f;
      --bgB:#0a2f3f;
      --glass: rgba(255,255,255,.085);
      --glass2: rgba(255,255,255,.055);
      --border: rgba(255,255,255,.16);

      --text:#ecf6ff;
      --muted: rgba(236,246,255,.74);

      --aqua:#4fe3ff;
      --mint:#63ffb2;

      --shadow: 0 22px 70px rgba(0,0,0,.55);
      --radius: 22px;

      --btnH: 52px;
      --maxW: 860px;

      --sheetRadius: 22px;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }

    body{
      margin:0;
      font-family: system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      color:var(--text);
      background:
        radial-gradient(900px 520px at 10% 8%, rgba(79,227,255,.18), transparent 58%),
        radial-gradient(860px 520px at 92% 38%, rgba(99,255,178,.12), transparent 58%),
        radial-gradient(720px 520px at 45% 105%, rgba(255,255,255,.06), transparent 60%),
        linear-gradient(160deg, var(--bgA), var(--bgB));
      overflow-x:hidden;
    }

    /* Ambient water light */
    .waterGlow{
      position:fixed; inset:-80px;
      background:
        radial-gradient(1200px 640px at 15% 20%, rgba(79,227,255,.11), transparent 60%),
        radial-gradient(1000px 620px at 85% 55%, rgba(99,255,178,.085), transparent 60%),
        radial-gradient(700px 460px at 50% 95%, rgba(255,255,255,.05), transparent 65%);
      filter: blur(18px);
      animation: drift 12s ease-in-out infinite alternate;
      pointer-events:none;
      opacity:.92;
      z-index:0;
    }
    @keyframes drift{
      from{ transform: translate3d(-12px,-10px,0) scale(1.02); }
      to{ transform: translate3d(14px,12px,0) scale(1.06); }
    }

    /* Bubbles */
    .bubbles{
      position:fixed; inset:0;
      pointer-events:none;
      z-index:0;
      opacity:.6;
      overflow:hidden;
    }
    .bubble{
      position:absolute;
      bottom:-120px;
      width: 18px; height:18px;
      border-radius:999px;
      background: radial-gradient(circle at 30% 30%, rgba(255,255,255,.35), rgba(79,227,255,.10) 55%, rgba(99,255,178,.04));
      border: 1px solid rgba(255,255,255,.10);
      box-shadow: 0 14px 30px rgba(0,0,0,.25);
      animation: rise var(--dur) linear infinite;
      left: var(--x);
      transform: translate3d(0,0,0) scale(var(--s));
    }
    @keyframes rise{
      0%{ transform: translate3d(0,0,0) scale(var(--s)); opacity:0; }
      10%{ opacity:.85; }
      100%{ transform: translate3d(var(--dx), -120vh, 0) scale(calc(var(--s) * 1.05)); opacity:0; }
    }

    .wrap{
      position:relative;
      z-index:1;
      max-width: var(--maxW);
      margin:0 auto;
      padding: 26px 16px 38px;
      display:flex;
      justify-content:center;
    }

    .card{
      width:100%;
      border-radius: var(--radius);
      border: 1px solid rgba(255,255,255,.14);
      background: linear-gradient(180deg, var(--glass), var(--glass2));
      box-shadow: var(--shadow);
      backdrop-filter: blur(14px);
      overflow:hidden;
      position:relative;
    }

    /* Animated “aqua edge” glow */
    .card::before{
      content:"";
      position:absolute;
      inset:-2px;
      border-radius: calc(var(--radius) + 2px);
      background:
        conic-gradient(from 180deg,
          rgba(79,227,255,.0),
          rgba(79,227,255,.35),
          rgba(99,255,178,.28),
          rgba(255,255,255,.10),
          rgba(79,227,255,.0)
        );
      filter: blur(10px);
      opacity:.65;
      z-index:-1;
      animation: spin 10s linear infinite;
    }
    @keyframes spin{
      from{ transform: rotate(0deg); }
      to{ transform: rotate(360deg); }
    }

    .divider{
      height:1px;
      background: rgba(255,255,255,.10);
      margin: 0 18px;
    }

    /* ===== TOP ZONE (Brand + Hero) + Watermark ===== */
    .topZone{
      position: relative;
      overflow: hidden;
    }

    .wm{ pointer-events:none; }

    .topZone .wm{
      position:absolute;
      inset:0;
      pointer-events:none;
      z-index:0;
    }

    .topZone .wm img{
      position:absolute;
      top: -79px;
      right: -50px;
      width: 128%;
      height: auto;
      max-width:none;
      max-height:none;
      object-fit: contain;
      object-position: center;
      opacity: 0.28;
      transform: none;
      filter: brightness(1.25) contrast(1.15);
      pointer-events: none;
    }

    .topZone > *:not(.wm){
      position:relative;
      z-index:1;
    }

    /* Brand bar */
    .brandBar{
      padding: 14px 16px 12px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
    }

    .brandLeft{
      display:flex;
      align-items:center;
      gap:10px;
      min-width: 0;
    }

    .logoBox{
      width:48px; height:48px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(0,0,0,.12);
      display:grid;
      place-items:center;
      overflow:hidden;
      position:relative;
      flex: 0 0 auto;
      box-shadow: 0 16px 44px rgba(0,0,0,.35);
    }

    .logoBox::before{
      content:"";
      position:absolute;
      inset:-35%;
      background:
        radial-gradient(circle at 30% 30%, rgba(255,255,255,.18), transparent 55%),
        radial-gradient(circle at 70% 70%, rgba(79,227,255,.20), transparent 55%),
        radial-gradient(circle at 35% 80%, rgba(99,255,178,.16), transparent 60%);
      filter: blur(8px);
      opacity:.9;
      pointer-events:none;
    }

    .logoImg{
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
      position:relative;
      z-index:1;
      filter: drop-shadow(0 10px 18px rgba(0,0,0,.35));
    }

    .brandText{
      display:flex;
      flex-direction:column;
      gap:2px;
      min-width:0;
    }

    .brandName{
      font-weight:900;
      letter-spacing:.02em;
      font-size:13px;
      text-transform:uppercase;
      color: rgba(236,246,255,.92);
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }

    .brandTag{
      font-size:11px;
      color: var(--muted);
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }

    .chipBar{
      display:flex;
      align-items:center;
      justify-content:flex-end;
      gap:12px;
      min-width:0;
      flex: 1 1 auto;
    }

    .chipRow{
      display:flex;
      flex-wrap:wrap;
      gap:6px;
      justify-content:flex-end;
      align-items:center;
      min-width:0;
    }

    .chip{
      font-size:12px;
      padding:5px 10px;
      border-radius:999px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.12);
      color: var(--muted);
    }

    .chip.glow{
      border: 1px solid rgba(255,255,255,.18);
      background: linear-gradient(90deg, rgba(79,227,255,.22), rgba(99,255,178,.16));
      color: rgba(236,246,255,.92);
    }

    /* Identity */
    .hero{
      padding: 18px;
      display:flex;
      gap:16px;
      align-items:center;
    }

    .avatarRing{
      width: 104px;
      height: 104px;
      border-radius: 50%;
      padding: 2px;
      background: linear-gradient(135deg, rgba(79,227,255,.85), rgba(99,255,178,.65));
      box-shadow: 0 18px 55px rgba(0,0,0,.45);
      flex: 0 0 auto;
    }

    .avatarWrap{
      width:100%;
      height:100%;
      border-radius: 50%;
      overflow:hidden;
      border: 1px solid rgba(255,255,255,.18);
      background: rgba(0,0,0,.18);
      position:relative;
    }

    .avatarWrap::after{
      content:"";
      position:absolute;
      inset:-30%;
      background: radial-gradient(circle at 30% 30%, rgba(255,255,255,.20), transparent 55%);
      pointer-events:none;
    }

    .avatar{
      width:100%;
      height:100%;
      object-fit:cover;
      object-position:center 30%;
      display:block;
    }

    .who{
      min-width:0;
      display:flex;
      flex-direction:column;
      gap:6px;
      flex:1;
    }

    .name{
      margin:0;
      font-size:24px;
      letter-spacing:-0.02em;
      line-height:1.05;
    }

    .role{
      color: var(--muted);
      font-weight:700;
      letter-spacing:.01em;
    }

    .pulseLine{
      height:2px;
      width: 100%;
      max-width: 360px;
      border-radius: 999px;
      background:
        linear-gradient(90deg,
          rgba(79,227,255,0),
          rgba(79,227,255,.85),
          rgba(99,255,178,.70),
          rgba(255,255,255,.20),
          rgba(79,227,255,0)
        );
      opacity:.85;
      position:relative;
      overflow:hidden;
    }
    .pulseLine::after{
      content:"";
      position:absolute;
      inset:0;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,.35), transparent);
      transform: translateX(-60%);
      animation: sweep 2.6s ease-in-out infinite;
    }
    @keyframes sweep{
      0%{ transform: translateX(-60%); opacity:.0; }
      30%{ opacity:.65; }
      60%{ opacity:.45; }
      100%{ transform: translateX(120%); opacity:0; }
    }

    /* Info tiles */
    .info{
      padding: 18px;
      display:grid;
      gap:12px;
    }

    .tileBtn, .tile{
      width:100%;
      display:flex;
      align-items:center;
      gap:12px;
      padding: 12px 12px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.12);
      color: inherit;
      text-align:left;
    }

    .tileBtn{
      cursor:pointer;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
      transition: transform .12s ease, filter .12s ease;
    }
    .tileBtn:hover{ transform: translateY(-1px); }
    .tileBtn:active{ transform: translateY(0px) scale(.995); }

    .icon{
      width: 38px;
      height: 38px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.16);
      background: radial-gradient(circle at 30% 30%, rgba(255,255,255,.18), rgba(79,227,255,.14));
      display:grid;
      place-items:center;
      flex: 0 0 auto;
    }

    .icon svg{
      width: 18px;
      height: 18px;
      fill: rgba(236,246,255,.92);
    }

    .tileText{
      display:flex;
      flex-direction:column;
      gap:2px;
      min-width:0;
      flex:1;
    }

    .label{
      font-size:11px;
      color: rgba(236,246,255,.62);
      letter-spacing:.10em;
      text-transform:uppercase;
    }

    .value{
      font-size:14px;
      font-weight:800;
      color: rgba(236,246,255,.92);
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }

    .value a{
      color: inherit;
      text-decoration:none;
    }
    .value a:hover{ text-decoration:underline; }

    /* Actions */
    .actions{
      padding: 0 18px 18px;
      display:grid;
      grid-template-columns: repeat(2, 1fr);
      gap:12px;
    }

    .btn{
      height: var(--btnH);
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.12);
      color: var(--text);
      text-decoration:none;
      font-weight:900;
      letter-spacing:.01em;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      cursor:pointer;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
      transition: transform .12s ease, filter .12s ease, box-shadow .12s ease, opacity .2s ease;
    }

    .btn svg{
      width:18px;
      height:18px;
      fill: currentColor;
      opacity:.95;
    }

    .btn:hover{ transform: translateY(-1px); }
    .btn:active{ transform: translateY(0px) scale(.995); }

    .btn.primary{
      border:none;
      color:#031019;
      background: linear-gradient(90deg, rgba(79,227,255,.95), rgba(99,255,178,.85));
      box-shadow: 0 16px 40px rgba(79,227,255,.14);
    }

    .btn.quote{
      grid-column: 1 / -1;
      border:none;
      color:#031019;
      background: linear-gradient(90deg, rgba(99,255,178,.92), rgba(79,227,255,.88));
      box-shadow: 0 18px 44px rgba(99,255,178,.12);
    }

    .btn.save{
      grid-column: 1 / -1;
      background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(0,0,0,.14));
    }

    /* QR button */
    .btn.qr{
      grid-column: 1 / -1;
      border: 1px solid rgba(255,255,255,.16);
      background: linear-gradient(90deg, rgba(0,0,0,.14), rgba(255,255,255,.08));
    }

    footer{
      padding: 0 18px 18px;
      display:flex;
      justify-content:space-between;
      flex-wrap:wrap;
      gap:10px;
      font-size:11px;
      color: rgba(236,246,255,.55);
      text-transform:uppercase;
      letter-spacing:.08em;
    }

    /* Floating quick actions */
    .quick{
      position:fixed;
      right: 14px;
      bottom: 14px;
      display:flex;
      gap:10px;
      z-index:2;
      transition: opacity .2s ease, transform .2s ease;
    }
    .quick.hidden{
      opacity:0;
      transform: translateY(10px);
      pointer-events:none;
    }
    .qbtn{
      width:54px; height:54px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(0,0,0,.18);
      backdrop-filter: blur(10px);
      box-shadow: 0 18px 55px rgba(0,0,0,.45);
      display:grid;
      place-items:center;
      text-decoration:none;
      color: rgba(236,246,255,.92);
      -webkit-tap-highlight-color: transparent;
      transition: transform .12s ease;
    }
    .qbtn:active{ transform: scale(.98); }
    .qbtn svg{ width:20px; height:20px; fill: currentColor; }

    /* Bottom-sheet modal base */
    .overlay{
      position:fixed;
      inset:0;
      background: rgba(0,0,0,.55);
      backdrop-filter: blur(6px);
      opacity:0;
      pointer-events:none;
      transition: opacity .18s ease;
      z-index: 20;
    }
    .overlay.open{
      opacity:1;
      pointer-events:auto;
    }

    .sheet{
      position:fixed;
      left:0; right:0; bottom:0;
      transform: translateY(110%);
      transition: transform .22s ease;
      z-index: 21;
      padding: 12px 12px 18px;
    }
    .sheet.open{
      transform: translateY(0);
    }
    .sheetCard{
      max-width: 560px;
      margin: 0 auto;
      border-radius: var(--sheetRadius);
      border: 1px solid rgba(255,255,255,.14);
      background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06));
      box-shadow: 0 26px 90px rgba(0,0,0,.60);
      backdrop-filter: blur(16px);
      overflow:hidden;
    }
    .sheetTop{
      padding: 12px 14px 10px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      border-bottom: 1px solid rgba(255,255,255,.10);
    }
    .grab{
      width: 48px;
      height: 5px;
      border-radius: 999px;
      background: rgba(255,255,255,.20);
      margin: 6px auto 0;
    }
    .sheetTitle{
      font-weight: 900;
      letter-spacing:.01em;
    }
    .sheetSub{
      color: var(--muted);
      font-size: 12px;
      margin-top: 2px;
    }
    .xbtn{
      width: 38px; height: 38px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.12);
      color: var(--text);
      cursor:pointer;
      display:grid;
      place-items:center;
      -webkit-tap-highlight-color: transparent;
    }
    .xbtn:active{ transform: scale(.98); }

    .sheetBody{
      padding: 14px;
      display:grid;
      gap:10px;
    }

    .sheetBtn{
      height: 54px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.12);
      color: var(--text);
      text-decoration:none;
      font-weight: 950;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      cursor:pointer;
      -webkit-tap-highlight-color: transparent;
    }
    .sheetBtn.primary{
      border:none;
      color:#031019;
      background: linear-gradient(90deg, rgba(79,227,255,.95), rgba(99,255,178,.85));
    }
    .sheetBtn svg{ width:18px; height:18px; fill: currentColor; }

    /* QR modal content */
    .qrFrame{
      border-radius: 20px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.14);
      padding: 14px;
      display:grid;
      place-items:center;
      gap:12px;
    }

    #qrCanvas{
  max-width: 260px;
  width: 100%;
  height: auto;
  border-radius: 14px;
  background: #fff;
  padding: 10px;
  display: block;
  image-rendering: pixelated;
}

    .qrCaption{
      text-align:center;
      color: rgba(236,246,255,.92);
      font-weight: 900;
    }

    .qrUrl{
      text-align:center;
      color: rgba(236,246,255,.65);
      font-size: 12px;
      word-break: break-all;
    }

    /* Force QR overlay above everything */
    #qrOverlay{ z-index: 9998 !important; }
    #qrSheet{ z-index: 9999 !important; }

    /* Responsive */
    @media (max-width: 520px){
      .brandBar{
        flex-direction: column;
        align-items: flex-start;
        gap: 8px;
        padding: 8px 14px 8px;
      }
      .chipBar{
        width: 100%;
        justify-content: space-between;
        gap: 10px;
      }
      .chipRow{
        justify-content: flex-start;
        gap: 6px;
      }
    }

    @media (max-width: 380px){
      .hero{ flex-direction:column; align-items:flex-start; }
      .actions{ grid-template-columns: 1fr; }
      .btn.save, .btn.quote{ grid-column:auto; }
      .quick{ right: 10px; bottom: 10px; }
    }

    @media (prefers-reduced-motion: reduce){
      .waterGlow, .bubble, .pulseLine::after, .card::before{ animation:none !important; }
      .sheet, .overlay{ transition:none !important; }
    }
  </style>
</head>

<body>
  <div class="waterGlow"></div>

  <div class="bubbles" aria-hidden="true">
    <div class="bubble" style="--x:10%; --s:0.9; --dur:14s; --dx:-12px;"></div>
    <div class="bubble" style="--x:18%; --s:0.7; --dur:11s; --dx:8px;"></div>
    <div class="bubble" style="--x:27%; --s:1.2; --dur:16s; --dx:-10px;"></div>
    <div class="bubble" style="--x:38%; --s:0.6; --dur:10s; --dx:14px;"></div>
    <div class="bubble" style="--x:52%; --s:1.0; --dur:15s; --dx:-16px;"></div>
    <div class="bubble" style="--x:63%; --s:0.8; --dur:12s; --dx:10px;"></div>
    <div class="bubble" style="--x:74%; --s:1.1; --dur:17s; --dx:-8px;"></div>
    <div class="bubble" style="--x:86%; --s:0.65; --dur:11s; --dx:12px;"></div>
    <div class="bubble" style="--x:93%; --s:0.9; --dur:13s; --dx:-6px;"></div>
  </div>

  <div class="wrap">
    <main class="card">

      <!-- TOP ZONE -->
      <div class="topZone">
        <div class="wm" aria-hidden="true">
          <img src="hd-watermark.png" alt="" />
        </div>

        <section class="brandBar">
          <div class="brandLeft">
            <div class="logoBox" title="Select Source Water">
              <img id="logoImg" class="logoImg" src="logo.png" alt="Select Source Water logo"
                   onerror="this.onerror=null; this.src='logo.jpg';" />
            </div>
            <div class="brandText">
              <div class="brandName">Select Source Water</div>
              <div class="brandTag">Water Filtration • Softening • Reverse Osmosis</div>
            </div>
          </div>

          <div class="chipBar">
            <div class="chipRow">
              <div class="chip glow">Licensed • Installed • Supported</div>
              <div class="chip">No-pressure consults</div>
            </div>
          </div>
        </section>

        <div class="divider"></div>

        <section class="hero">
          <div class="avatarRing">
            <div class="avatarWrap">
              <img class="avatar" src="profile.jpg" alt="Greg Buckner"
                   onerror="this.style.display='none'; this.parentElement.style.background='rgba(0,0,0,.18)';" />
            </div>
          </div>

          <div class="who">
            <h1 class="name">Greg Buckner</h1>
            <div class="role">Water Specialist</div>
            <div class="pulseLine" aria-hidden="true"></div>
          </div>
        </section>
      </div>

      <!-- Info -->
      <section class="info">
        <button class="tileBtn" id="phoneTile" type="button" aria-label="Call or text Greg">
          <div class="icon" aria-hidden="true">
            <svg viewBox="0 0 24 24"><path d="M6.6 10.8c1.7 3.1 3.5 4.9 6.6 6.6l2.2-2.2c.3-.3.7-.4 1.1-.3 1.2.4 2.5.6 3.9.6.6 0 1 .4 1 1V20c0 .6-.4 1-1 1C10.1 21 3 13.9 3 5c0-.6.4-1 1-1h3.3c.6 0 1 .4 1 1 0 1.3.2 2.6.6 3.9.1.4 0 .8-.3 1.1L6.6 10.8z"/></svg>
          </div>
          <div class="tileText">
            <div class="label">Call / Text</div>
            <div class="value">(209) 769-4750</div>
          </div>
        </button>

        <div class="tile">
          <div class="icon" aria-hidden="true">
            <svg viewBox="0 0 24 24"><path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4-8 5L4 8V6l8 5 8-5v2z"/></svg>
          </div>
          <div class="tileText">
            <div class="label">Email</div>
            <div class="value"><a href="mailto:Bucknergreg86@gmail.com">Bucknergreg86@gmail.com</a></div>
          </div>
        </div>

        <div class="tile">
          <div class="icon" aria-hidden="true">
            <svg viewBox="0 0 24 24"><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2zm6.9 9h-2.2c-.1-2-.7-3.9-1.7-5.4 1.9 1 3.3 3 3.9 5.4zM12 4.1c1.3 1.6 2.1 3.9 2.2 6H9.8c.1-2.1.9-4.4 2.2-6zM4.1 13h2.2c.1 2 .7 3.9 1.7 5.4-1.9-1-3.3-3-3.9-5.4zM6.3 11H4.1c.6-2.4 2-4.4 3.9-5.4-1 1.5-1.6 3.4-1.7 5.4zM12 19.9c-1.3-1.6-2.1-3.9-2.2-6h4.4c-.1 2.1-.9 4.4-2.2 6zm3.9-1.5c1-1.5 1.6-3.4 1.7-5.4h2.2c-.6 2.4-2-4.4-3.9-5.4z"/></svg>
          </div>
          <div class="tileText">
            <div class="label">Website</div>
            <div class="value"><a href="https://selectsourcewater.com" target="_blank" rel="noopener">selectsourcewater.com</a></div>
          </div>
        </div>
      </section>

      <!-- Actions -->
      <section class="actions" id="actions">
        <a class="btn quote" href="https://calendar.app.google/GLxLpmB7KNzAm6zi6" target="_blank" rel="noopener" aria-label="Book a free water test">
          <svg viewBox="0 0 24 24"><path d="M12 2 2 7l10 5 10-5-10-5zm0 8L2 5v12l10 5 10-5V5l-10 5zm0 10-8-4V8l8 4 8-4v8l-8 4z"/></svg>
          Book a Free Water Test
        </a>

        <a class="btn primary" href="tel:12097694750" aria-label="Call Greg">
          <svg viewBox="0 0 24 24"><path d="M6.6 10.8c1.7 3.1 3.5 4.9 6.6 6.6l2.2-2.2c.3-.3.7-.4 1.1-.3 1.2.4 2.5.6 3.9.6.6 0 1 .4 1 1V20c0 .6-.4 1-1 1C10.1 21 3 13.9 3 5c0-.6.4-1 1-1h3.3c.6 0 1 .4 1 1 0 1.3.2 2.6.6 3.9.1.4 0 .8-.3 1.1L6.6 10.8z"/></svg>
          Call
        </a>

        <a class="btn" href="sms:12097694750" aria-label="Text Greg">
          <svg viewBox="0 0 24 24"><path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z"/></svg>
          Text
        </a>

        <a class="btn" href="mailto:Bucknergreg86@gmail.com" aria-label="Email Greg">
          <svg viewBox="0 0 24 24"><path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4-8 5L4 8V6l8 5 8-5v2z"/></svg>
          Email
        </a>

        <a class="btn" href="https://selectsourcewater.com" target="_blank" rel="noopener" aria-label="Visit website">
          <svg viewBox="0 0 24 24"><path d="M10 6H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2v-4h-2v4H6V8h4V6zm4 0v2h3.6L9 16.6 10.4 18 19 9.4V13h2V6h-7z"/></svg>
          Website
        </a>

        <button class="btn save" id="saveContactBtn" type="button" aria-label="Save Greg's contact">
          <svg viewBox="0 0 24 24"><path d="M17 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zM12 19c-2.2 0-4-1.8-4-4s1.8-4 4-4 4 1.8 4 4-1.8 4-4 4zm3-10H5V5h10v4z"/></svg>
          Save Contact
        </button>

        <button class="btn qr" id="qrPopupBtn" type="button" aria-label="Show QR code">
          <svg viewBox="0 0 24 24"><path d="M3 3h8v8H3V3zm2 2v4h4V5H5zm8-2h8v8h-8V3zm2 2v4h4V5h-4zM3 13h8v8H3v-8zm2 2v4h4v-4H5zm10 0h2v2h-2v-2zm-2-2h4v4h-4v-4zm6 0h2v2h-2v-2zm0 4h2v4h-2v-4zm-4 2h2v2h-2v-2zm2 2h4v2h-4v-2z"/></svg>
          Show QR
        </button>
      </section>

      <footer>
        <div>Installed by Select Source Water</div>
        <div>Digital eCard</div>
      </footer>
    </main>
  </div>

  <!-- Floating quick actions -->
  <div class="quick" id="quick" aria-label="Quick actions">
    <a class="qbtn" href="tel:12097694750" aria-label="Quick call">
      <svg viewBox="0 0 24 24"><path d="M6.6 10.8c1.7 3.1 3.5 4.9 6.6 6.6l2.2-2.2c.3-.3.7-.4 1.1-.3 1.2.4 2.5.6 3.9.6.6 0 1 .4 1 1V20c0 .6-.4 1-1 1C10.1 21 3 13.9 3 5c0-.6.4-1 1-1h3.3c.6 0 1 .4 1 1 0 1.3.2 2.6.6 3.9.1.4 0 .8-.3 1.1L6.6 10.8z"/></svg>
    </a>
    <a class="qbtn" href="sms:12097694750" aria-label="Quick text">
      <svg viewBox="0 0 24 24"><path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0-2-.9-2-2V4c0-1.1-.9-2-2-2z"/></svg>
    </a>
  </div>

  <!-- Phone chooser modal -->
  <div class="overlay" id="overlay" aria-hidden="true"></div>

  <div class="sheet" id="sheet" role="dialog" aria-modal="true" aria-label="Choose Call or Text">
    <div class="sheetCard">
      <div class="grab" aria-hidden="true"></div>
      <div class="sheetTop">
        <div>
          <div class="sheetTitle">Reach Greg</div>
          <div class="sheetSub">(209) 769-4750 • Choose Call or Text</div>
        </div>
        <button class="xbtn" id="closeSheetBtn" type="button" aria-label="Close">✕</button>
      </div>

      <div class="sheetBody">
        <a class="sheetBtn primary" id="sheetCall" href="tel:12097694750" aria-label="Call Greg">
          <svg viewBox="0 0 24 24"><path d="M6.6 10.8c1.7 3.1 3.5 4.9 6.6 6.6l2.2-2.2c.3-.3.7-.4 1.1-.3 1.2.4 2.5.6 3.9.6.6 0 1 .4 1 1V20c0 .6-.4 1-1 1C10.1 21 3 13.9 3 5c0-.6.4-1 1-1h3.3c.6 0 1 .4 1 1 0 1.3.2 2.6.6 3.9.1.4 0 .8-.3 1.1L6.6 10.8z"/></svg>
          Call Now
        </a>

        <a class="sheetBtn" id="sheetText" href="sms:12097694750" aria-label="Text Greg">
          <svg viewBox="0 0 24 24"><path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0-2-.9-2-2V4c0-1.1-.9-2-2-2z"/></svg>
          Text Instead
        </a>
      </div>
    </div>
  </div>

  <!-- QR modal (separate overlay, above everything) -->
  <div class="overlay" id="qrOverlay" aria-hidden="true"></div>

  <div class="sheet" id="qrSheet" role="dialog" aria-modal="true" aria-label="QR Code">
    <div class="sheetCard">
      <div class="grab" aria-hidden="true"></div>
      <div class="sheetTop">
        <div>
          <div class="sheetTitle">Scan My Card</div>
          <div class="sheetSub">Point your camera at the code</div>
        </div>
        <button class="xbtn" id="qrCloseBtn" type="button" aria-label="Close">✕</button>
      </div>

      <div class="sheetBody">
        <div class="qrFrame">
          <canvas id="qrCanvas" aria-label="QR Code"></canvas>
          <div class="qrCaption">Scan to open this eCard</div>
          <div class="qrUrl" id="qrUrl"></div>
        </div>

        <button class="sheetBtn primary" id="qrDownloadBtn" type="button">Download QR</button>
      </div>
    </div>
  </div>

  <script>
    // ====== Quick config (edit if needed) ======
    const FULL_NAME = "Greg Buckner";
    const ORG = "Select Source Water";
    const TITLE = "Water Specialist";
    const PHONE_E164 = "+1-209-769-4750";
    const EMAIL = "Bucknergreg86@gmail.com";
    const URL_SITE = "https://selectsourcewater.com";
    const VCF_FILENAME = "Greg_Buckner_SelectSourceWater.vcf";

    // ====== Save Contact (.vcf) ======
    function buildVCF(){
      return `BEGIN:VCARD
VERSION:3.0
N:Buckner;Greg;;;
FN:${FULL_NAME}
ORG:${ORG}
TITLE:${TITLE}
TEL;TYPE=CELL:${PHONE_E164}
EMAIL;TYPE=INTERNET:${EMAIL}
URL:${URL_SITE}
END:VCARD`;
    }

    const saveBtn = document.getElementById("saveContactBtn");
    if (saveBtn){
      saveBtn.addEventListener("click", () => {
        const vcf = buildVCF();
        const blob = new Blob([vcf], { type: "text/vcard" });
        const url = URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.href = url;
        a.download = VCF_FILENAME;
        document.body.appendChild(a);
        a.click();
        a.remove();
        URL.revokeObjectURL(url);

        const old = saveBtn.innerHTML;
        saveBtn.innerHTML = `<svg viewBox="0 0 24 24"><path d="M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4z"/></svg> Saved`;
        setTimeout(()=> saveBtn.innerHTML = old, 1200);
      });
    }

    // ====== Smart Phone Chooser (bottom-sheet) ======
    const overlay = document.getElementById("overlay");
    const sheet = document.getElementById("sheet");
    const phoneTile = document.getElementById("phoneTile");
    const closeSheetBtn = document.getElementById("closeSheetBtn");

    function openSheet(){
      if (!overlay || !sheet) return;
      overlay.classList.add("open");
      sheet.classList.add("open");
      overlay.setAttribute("aria-hidden", "false");
      document.body.style.overflow = "hidden";
    }

    function closeSheet(){
      if (!overlay || !sheet) return;
      overlay.classList.remove("open");
      sheet.classList.remove("open");
      overlay.setAttribute("aria-hidden", "true");
      document.body.style.overflow = "";
    }

    if (phoneTile) phoneTile.addEventListener("click", openSheet);
    if (overlay) overlay.addEventListener("click", closeSheet);
    if (closeSheetBtn) closeSheetBtn.addEventListener("click", closeSheet);

    // ====== QR Popup (separate overlay) ======
    const qrPopupBtn = document.getElementById("qrPopupBtn");
    const qrOverlay = document.getElementById("qrOverlay");
    const qrSheet = document.getElementById("qrSheet");
    const qrCloseBtn = document.getElementById("qrCloseBtn");
    const qrUrlEl = document.getElementById("qrUrl");
    const qrCanvas = document.getElementById("qrCanvas");
    const qrDownloadBtn = document.getElementById("qrDownloadBtn");

    function openQR(){
      if (!qrOverlay || !qrSheet || !qrUrlEl || !qrCanvas) return;

      const url = window.location.href.split("#")[0];
      qrUrlEl.textContent = url;

      qrOverlay.classList.add("open");
      qrSheet.classList.add("open");
      qrOverlay.setAttribute("aria-hidden", "false");
      document.body.style.overflow = "hidden";

      const qrModel = QR(url, "M");
      drawQR(qrCanvas, qrModel, { scale: 6, quiet: 4, bg:"#ffffff", fg:"#000000", rounded:false });
    }

    function closeQR(){
      if (!qrOverlay || !qrSheet) return;
      qrOverlay.classList.remove("open");
      qrSheet.classList.remove("open");
      qrOverlay.setAttribute("aria-hidden", "true");
      document.body.style.overflow = "";
    }

    if (qrPopupBtn) qrPopupBtn.addEventListener("click", openQR);

    // Only close when tapping the dark overlay (not the sheet)
    if (qrOverlay){
      qrOverlay.addEventListener("click", (e) => {
        if (e.target === qrOverlay) closeQR();
      });
    }

    if (qrCloseBtn) qrCloseBtn.addEventListener("click", closeQR);

    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape"){
        closeSheet();
        if (qrSheet && qrSheet.classList.contains("open")) closeQR();
      }
    });

    if (qrDownloadBtn){
      qrDownloadBtn.addEventListener("click", () => {
        const url = window.location.origin + window.location.pathname;
        downloadQR(url);
      });
    }

    function downloadQR(url){
      const temp = document.createElement("canvas");
      const qrModel = QR(url, "M");
      drawQR(temp, qrModel, { scale: 8, quiet: 4, bg:"#ffffff", fg:"#000000", rounded:false });

      const a = document.createElement("a");
      a.href = temp.toDataURL("image/png");
      a.download = `${FULL_NAME.replace(/\s+/g,'_')}_QR.png`;
      document.body.appendChild(a);
      a.click();
      a.remove();
    }

    // ====== Auto-hide floating quick buttons when main actions are visible ======
    const quick = document.getElementById("quick");
    const actions = document.getElementById("actions");

    if ("IntersectionObserver" in window && actions && quick){
      const io = new IntersectionObserver((entries) => {
        const entry = entries[0];
        if (entry.isIntersecting && entry.intersectionRatio > 0.08){
          quick.classList.add("hidden");
        } else {
          quick.classList.remove("hidden");
        }
      }, { threshold: [0, 0.08, 0.2] });

      io.observe(actions);
    }

    // ============================================================
    // QR engine (compact, local; no CDN)
    // ============================================================
    function QR(text, ecc){
      const levels = { L:1, M:0, Q:3, H:2 };
      const ec = levels[ecc || "M"] ?? 0;

      for (let v=3; v<=10; v++){
        try{
          const m = QRCodeModel(v, ec);
          m.addData(text);
          m.make();
          return m;
        }catch(e){}
      }
      const m = QRCodeModel(10, ec);
      m.addData(text);
      m.make();
      return m;
    }

    function drawQR(canvas, qrModel, opts){
      const ctx = canvas.getContext("2d");
      const count = qrModel.getModuleCount();
      const quiet = opts.quiet ?? 4;
      const scale = opts.scale ?? 8;
      const size = (count + quiet*2) * scale;

      canvas.width = size;
      canvas.height = size;

      ctx.fillStyle = opts.bg ?? "#ffffff";
      ctx.fillRect(0,0,size,size);

      ctx.fillStyle = opts.fg ?? "#000000";

      for (let r=0; r<count; r++){
        for (let c=0; c<count; c++){
          if (qrModel.isDark(r,c)){
            const x = (c+quiet)*scale;
            const y = (r+quiet)*scale;

            if (opts.rounded){
              const rad = Math.max(1, Math.floor(scale * 0.35));
              roundRect(ctx, x, y, scale, scale, rad);
              ctx.fill();
            } else {
              ctx.fillRect(x,y,scale,scale);
            }
          }
        }
      }
    }

    function roundRect(ctx, x, y, w, h, r){
      ctx.beginPath();
      ctx.moveTo(x+r, y);
      ctx.arcTo(x+w, y, x+w, y+h, r);
      ctx.arcTo(x+w, y+h, x, y+h, r);
      ctx.arcTo(x, y+h, x, y, r);
      ctx.arcTo(x, y, x+w, y, r);
      ctx.closePath();
    }

    function QRCodeModel(typeNumber, errorCorrectLevel){
      const PAD0 = 0xEC, PAD1 = 0x11;

      const qr = {
        typeNumber,
        errorCorrectLevel,
        modules: null,
        moduleCount: 0,
        dataCache: null,
        dataList: [],
        addData(data){ this.dataList.push(QR8bitByte(data)); this.dataCache = null; },
        isDark(r,c){ return this.modules[r][c]; },
        getModuleCount(){ return this.moduleCount; },
        make(){
          this.moduleCount = this.typeNumber * 4 + 17;
          this.modules = Array.from({length:this.moduleCount}, () => Array(this.moduleCount).fill(null));

          setupPositionProbePattern(this, 0, 0);
          setupPositionProbePattern(this, this.moduleCount - 7, 0);
          setupPositionProbePattern(this, 0, this.moduleCount - 7);
          setupTimingPattern(this);
          setupTypeInfo(this, this.errorCorrectLevel, 0);

          if (this.dataCache == null) this.dataCache = createData(this.typeNumber, this.errorCorrectLevel, this.dataList);
          mapData(this, this.dataCache, 0);
        }
      };

      function QR8bitByte(data){
        const bytes = [];
        for (let i=0; i<data.length; i++) bytes.push(data.charCodeAt(i));
        return {
          getLength(){ return bytes.length; },
          write(buffer){ for (let i=0; i<bytes.length; i++) buffer.put(bytes[i], 8); }
        };
      }

      function QRBitBuffer(){
        return {
          buffer: [],
          length: 0,
          put(num, len){
            for (let i=0; i<len; i++) this.putBit(((num >>> (len - i - 1)) & 1) === 1);
          },
          putBit(bit){
            const idx = Math.floor(this.length / 8);
            if (this.buffer.length <= idx) this.buffer.push(0);
            if (bit) this.buffer[idx] |= (0x80 >>> (this.length % 8));
            this.length++;
          }
<script>
/* ============================================================
   QR engine (REAL QR): qrcode-generator (MIT) - embedded
   ============================================================ */

function QR(text, ecc){
  const levels = { L:'L', M:'M', Q:'Q', H:'H' };
  const ec = levels[ecc || "M"] || "M";

  // Auto-pick smallest type that fits
  for (let type = 1; type <= 10; type++){
    try{
      const qr = qrcode(type, ec);
      qr.addData(text);
      qr.make();
      return qr;
    } catch (e) {}
  }
  // Fallback bigger
  const qr = qrcode(10, ec);
  qr.addData(text);
  qr.make();
  return qr;
}

function drawQR(canvas, qr, opts){
  const ctx = canvas.getContext("2d");
  const count = qr.getModuleCount();
  const quiet = opts.quiet ?? 4;
  const scale = opts.scale ?? 10;
  const size = (count + quiet*2) * scale;

  canvas.width = size;
  canvas.height = size;

  ctx.fillStyle = opts.bg ?? "#ffffff";
  ctx.fillRect(0,0,size,size);

  ctx.fillStyle = opts.fg ?? "#000000";

  for (let r=0; r<count; r++){
    for (let c=0; c<count; c++){
      if (qr.isDark(r,c)){
        const x = (c+quiet)*scale;
        const y = (r+quiet)*scale;
        ctx.fillRect(x,y,scale,scale);
      }
    }
  }
}

/* ==== qrcode-generator (minified-ish, embedded) ==== */
/* https://github.com/kazuhikoarase/qrcode-generator (MIT) */
(function(global){
  function qrcode(typeNumber, errorCorrectionLevel) {
    var PAD0 = 0xEC;
    var PAD1 = 0x11;

    var _typeNumber = typeNumber;
    var _errorCorrectionLevel = errorCorrectionLevel;
    var _modules = null;
    var _moduleCount = 0;
    var _dataCache = null;
    var _dataList = [];

    var _this = {};

    var makeImpl = function(test, maskPattern) {
      _moduleCount = _typeNumber * 4 + 17;
      _modules = function(moduleCount) {
        var modules = new Array(moduleCount);
        for (var row = 0; row < moduleCount; row += 1) {
          modules[row] = new Array(moduleCount);
          for (var col = 0; col < moduleCount; col += 1) {
            modules[row][col] = null;
          }
        }
        return modules;
      }(_moduleCount);

      setupPositionProbePattern(0, 0);
      setupPositionProbePattern(_moduleCount - 7, 0);
      setupPositionProbePattern(0, _moduleCount - 7);
      setupPositionAdjustPattern();
      setupTimingPattern();
      setupTypeInfo(test, maskPattern);

      if (_typeNumber >= 7) {
        setupTypeNumber(test);
      }

      if (_dataCache == null) {
        _dataCache = createData(_typeNumber, _errorCorrectionLevel, _dataList);
      }

      mapData(_dataCache, maskPattern);
    };

    var setupPositionProbePattern = function(row, col) {
      for (var r = -1; r <= 7; r += 1) {
        if (row + r <= -1 || _moduleCount <= row + r) continue;
        for (var c = -1; c <= 7; c += 1) {
          if (col + c <= -1 || _moduleCount <= col + c) continue;
          if ((0 <= r && r <= 6 && (c == 0 || c == 6)) ||
              (0 <= c && c <= 6 && (r == 0 || r == 6)) ||
              (2 <= r && r <= 4 && 2 <= c && c <= 4)) {
            _modules[row + r][col + c] = true;
          } else {
            _modules[row + r][col + c] = false;
          }
        }
      }
    };

    var getBestMaskPattern = function() {
      var minLostPoint = 0;
      var pattern = 0;

      for (var i = 0; i < 8; i += 1) {
        makeImpl(true, i);
        var lostPoint = QRUtil.getLostPoint(_this);
        if (i == 0 || minLostPoint > lostPoint) {
          minLostPoint = lostPoint;
          pattern = i;
        }
      }
      return pattern;
    };

    var setupTimingPattern = function() {
      for (var i = 8; i < _moduleCount - 8; i += 1) {
        if (_modules[i][6] != null) continue;
        _modules[i][6] = (i % 2 == 0);
      }
      for (var i = 8; i < _moduleCount - 8; i += 1) {
        if (_modules[6][i] != null) continue;
        _modules[6][i] = (i % 2 == 0);
      }
    };

    var setupPositionAdjustPattern = function() {
      var pos = QRUtil.getPatternPosition(_typeNumber);
      for (var i = 0; i < pos.length; i += 1) {
        for (var j = 0; j < pos.length; j += 1) {
          var row = pos[i];
          var col = pos[j];
          if (_modules[row][col] != null) continue;
          for (var r = -2; r <= 2; r += 1) {
            for (var c = -2; c <= 2; c += 1) {
              if (r == -2 || r == 2 || c == -2 || c == 2 ||
                  (r == 0 && c == 0)) {
                _modules[row + r][col + c] = true;
              } else {
                _modules[row + r][col + c] = false;
              }
            }
          }
        }
      }
    };

    var setupTypeNumber = function(test) {
      var bits = QRUtil.getBCHTypeNumber(_typeNumber);
      for (var i = 0; i < 18; i += 1) {
        var mod = (!test && ((bits >> i) & 1) == 1);
        _modules[Math.floor(i / 3)][i % 3 + _moduleCount - 8 - 3] = mod;
      }
      for (var i = 0; i < 18; i += 1) {
        var mod = (!test && ((bits >> i) & 1) == 1);
        _modules[i % 3 + _moduleCount - 8 - 3][Math.floor(i / 3)] = mod;
      }
    };

    var setupTypeInfo = function(test, maskPattern) {
      var data = (_errorCorrectionLevel << 3) | maskPattern;
      var bits = QRUtil.getBCHTypeInfo(data);

      for (var i = 0; i < 15; i += 1) {
        var mod = (!test && ((bits >> i) & 1) == 1);

        if (i < 6) _modules[i][8] = mod;
        else if (i < 8) _modules[i + 1][8] = mod;
        else _modules[_moduleCount - 15 + i][8] = mod;
      }

      for (var i = 0; i < 15; i += 1) {
        var mod = (!test && ((bits >> i) & 1) == 1);

        if (i < 8) _modules[8][_moduleCount - i - 1] = mod;
        else if (i < 9) _modules[8][15 - i - 1 + 1] = mod;
        else _modules[8][15 - i - 1] = mod;
      }

      _modules[_moduleCount - 8][8] = (!test);
    };

    var mapData = function(data, maskPattern) {
      var inc = -1;
      var row = _moduleCount - 1;
      var bitIndex = 7;
      var byteIndex = 0;

      for (var col = _moduleCount - 1; col > 0; col -= 2) {
        if (col == 6) col -= 1;

        while (true) {
          for (var c = 0; c < 2; c += 1) {
            if (_modules[row][col - c] == null) {
              var dark = false;

              if (byteIndex < data.length) {
                dark = (((data[byteIndex] >>> bitIndex) & 1) == 1);
              }

              var mask = QRUtil.getMask(maskPattern, row, col - c);

              _modules[row][col - c] = mask ? !dark : dark;

              bitIndex -= 1;
              if (bitIndex == -1) {
                byteIndex += 1;
                bitIndex = 7;
              }
            }
          }

          row += inc;

          if (row < 0 || _moduleCount <= row) {
            row -= inc;
            inc = -inc;
            break;
          }
        }
      }
    };

    var createBytes = function(buffer, rsBlocks) {
      var offset = 0;

      var maxDcCount = 0;
      var maxEcCount = 0;

      var dcdata = new Array(rsBlocks.length);
      var ecdata = new Array(rsBlocks.length);

      for (var r = 0; r < rsBlocks.length; r += 1) {
        var dcCount = rsBlocks[r].dataCount;
        var ecCount = rsBlocks[r].totalCount - dcCount;

        maxDcCount = Math.max(maxDcCount, dcCount);
        maxEcCount = Math.max(maxEcCount, ecCount);

        dcdata[r] = new Array(dcCount);

        for (var i = 0; i < dcdata[r].length; i += 1) {
          dcdata[r][i] = 0xff & buffer.getBuffer()[i + offset];
        }
        offset += dcCount;

        var rsPoly = QRUtil.getErrorCorrectPolynomial(ecCount);
        var rawPoly = QRPolynomial(dcdata[r], rsPoly.getLength() - 1);

        var modPoly = rawPoly.mod(rsPoly);
        ecdata[r] = new Array(rsPoly.getLength() - 1);
        for (var i = 0; i < ecdata[r].length; i += 1) {
          var modIndex = i + modPoly.getLength() - ecdata[r].length;
          ecdata[r][i] = (modIndex >= 0) ? modPoly.get(modIndex) : 0;
        }
      }

      var totalCodeCount = 0;
      for (var i = 0; i < rsBlocks.length; i += 1) totalCodeCount += rsBlocks[i].totalCount;

      var data = new Array(totalCodeCount);
      var index = 0;

      for (var i = 0; i < maxDcCount; i += 1) {
        for (var r = 0; r < rsBlocks.length; r += 1) {
          if (i < dcdata[r].length) data[index++] = dcdata[r][i];
        }
      }

      for (var i = 0; i < maxEcCount; i += 1) {
        for (var r = 0; r < rsBlocks.length; r += 1) {
          if (i < ecdata[r].length) data[index++] = ecdata[r][i];
        }
      }

      return data;
    };

    var createData = function(typeNumber, errorCorrectionLevel, dataList) {
      var rsBlocks = QRRSBlock.getRSBlocks(typeNumber, errorCorrectionLevel);

      var buffer = QRBitBuffer();

      for (var i = 0; i < dataList.length; i += 1) {
        var data = dataList[i];
        buffer.put(data.getMode(), 4);
        buffer.put(data.getLength(), QRUtil.getLengthInBits(data.getMode(), typeNumber));
        data.write(buffer);
      }

      var totalDataCount = 0;
      for (var i = 0; i < rsBlocks.length; i += 1) totalDataCount += rsBlocks[i].dataCount;

      if (buffer.getLengthInBits() > totalDataCount * 8) {
        throw new Error("code length overflow");
      }

      if (buffer.getLengthInBits() + 4 <= totalDataCount * 8) buffer.put(0, 4);

      while (buffer.getLengthInBits() % 8 != 0) buffer.putBit(false);

      while (true) {
        if (buffer.getLengthInBits() >= totalDataCount * 8) break;
        buffer.put(PAD0, 8);
        if (buffer.getLengthInBits() >= totalDataCount * 8) break;
        buffer.put(PAD1, 8);
      }

      return createBytes(buffer, rsBlocks);
    };

    _this.addData = function(data) {
      var newData = QR8bitByte(data);
      _dataList.push(newData);
      _dataCache = null;
    };

    _this.isDark = function(row, col) {
      if (row < 0 || _moduleCount <= row || col < 0 || _moduleCount <= col) {
        throw new Error(row + "," + col);
      }
      return _modules[row][col];
    };

    _this.getModuleCount = function() { return _moduleCount; };

    _this.make = function() {
      if (_typeNumber < 1) _typeNumber = 1;
      makeImpl(false, getBestMaskPattern());
    };

    return _this;
  }

  var QRMode = { MODE_8BIT_BYTE: 1 << 2 };

  function QR8bitByte(data) {
    var _mode = QRMode.MODE_8BIT_BYTE;
    var _data = data;

    var _this = {};
    _this.getMode = function() { return _mode; };
    _this.getLength = function() { return _data.length; };
    _this.write = function(buffer) {
      for (var i = 0; i < _data.length; i += 1) buffer.put(_data.charCodeAt(i), 8);
    };
    return _this;
  }

  function QRBitBuffer() {
    var _buffer = [];
    var _length = 0;
    var _this = {};
    _this.getBuffer = function(){ return _buffer; };
    _this.getLengthInBits = function(){ return _length; };
    _this.put = function(num, length) {
      for (var i = 0; i < length; i += 1) _this.putBit(((num >>> (length - i - 1)) & 1) == 1);
    };
    _this.putBit = function(bit) {
      var bufIndex = Math.floor(_length / 8);
      if (_buffer.length <= bufIndex) _buffer.push(0);
      if (bit) _buffer[bufIndex] |= (0x80 >>> (_length % 8));
      _length += 1;
    };
    return _this;
  }

  function QRPolynomial(num, shift) {
    var _num = num;
    while (_num.length > 0 && _num[0] == 0) _num.shift();
    var _this = {};
    _this.get = function(index) { return _num[index]; };
    _this.getLength = function(){ return _num.length; };
    _this.multiply = function(e) {
      var num = new Array(_this.getLength() + e.getLength() - 1);
      for (var i = 0; i < num.length; i += 1) num[i] = 0;
      for (var i = 0; i < _this.getLength(); i += 1) {
        for (var j = 0; j < e.getLength(); j += 1) {
          num[i + j] ^= QRMath.gexp(QRMath.glog(_this.get(i)) + QRMath.glog(e.get(j)));
        }
      }
      return QRPolynomial(num, 0);
    };
    _this.mod = function(e) {
      if (_this.getLength() - e.getLength() < 0) return _this;

      var ratio = QRMath.glog(_this.get(0)) - QRMath.glog(e.get(0));
      var num = _num.slice();

      for (var i = 0; i < e.getLength(); i += 1) {
        num[i] ^= QRMath.gexp(QRMath.glog(e.get(i)) + ratio);
      }

      return QRPolynomial(num, 0).mod(e);
    };

    for (var i = 0; i < shift; i += 1) _num.push(0);
    return _this;
  }

  var QRMath = {
    glog: function(n) {
      if (n < 1) throw new Error("glog");
      return QRMath.LOG_TABLE[n];
    },
    gexp: function(n) {
      while (n < 0) n += 255;
      while (n >= 256) n -= 255;
      return QRMath.EXP_TABLE[n];
    },
    EXP_TABLE: new Array(256),
    LOG_TABLE: new Array(256)
  };

  for (var i = 0; i < 8; i += 1) QRMath.EXP_TABLE[i] = 1 << i;
  for (var i = 8; i < 256; i += 1) QRMath.EXP_TABLE[i] =
    QRMath.EXP_TABLE[i - 4] ^ QRMath.EXP_TABLE[i - 5] ^ QRMath.EXP_TABLE[i - 6] ^ QRMath.EXP_TABLE[i - 8];
  for (var i = 0; i < 255; i += 1) QRMath.LOG_TABLE[QRMath.EXP_TABLE[i]] = i;

  var QRUtil = {
    PATTERN_POSITION_TABLE: [
      [], [6, 18], [6, 22], [6, 26], [6, 30], [6, 34], [6, 22, 38],
      [6, 24, 42], [6, 26, 46], [6, 28, 50], [6, 30, 54]
    ],
    G15: (1 << 10) | (1 << 8) | (1 << 5) | (1 << 4) | (1 << 2) | (1 << 1) | (1 << 0),
    G18: (1 << 12) | (1 << 11) | (1 << 10) | (1 << 9) | (1 << 8) | (1 << 5) | (1 << 2) | (1 << 0),
    G15_MASK: (1 << 14) | (1 << 12) | (1 << 10) | (1 << 4) | (1 << 1),

    getBCHTypeInfo: function(data) {
      var d = data << 10;
      while (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G15) >= 0) {
        d ^= (QRUtil.G15 << (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G15)));
      }
      return ((data << 10) | d) ^ QRUtil.G15_MASK;
    },
    getBCHTypeNumber: function(data) {
      var d = data << 12;
      while (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G18) >= 0) {
        d ^= (QRUtil.G18 << (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G18)));
      }
      return (data << 12) | d;
    },
    getBCHDigit: function(data) {
      var digit = 0;
      while (data != 0) { digit += 1; data >>>= 1; }
      return digit;
    },
    getPatternPosition: function(typeNumber) {
      return QRUtil.PATTERN_POSITION_TABLE[typeNumber] || QRUtil.PATTERN_POSITION_TABLE[10];
    },
    getMask: function(maskPattern, i, j) {
      switch (maskPattern) {
        case 0: return (i + j) % 2 == 0;
        case 1: return i % 2 == 0;
        case 2: return j % 3 == 0;
        case 3: return (i + j) % 3 == 0;
        case 4: return (Math.floor(i / 2) + Math.floor(j / 3)) % 2 == 0;
        case 5: return ((i * j) % 2 + (i * j) % 3) == 0;
        case 6: return (((i * j) % 2 + (i * j) % 3) % 2) == 0;
        case 7: return (((i * j) % 3 + (i + j) % 2) % 2) == 0;
        default: throw new Error("bad maskPattern:" + maskPattern);
      }
    },
    getErrorCorrectPolynomial: function(errorCorrectLength) {
      var a = QRPolynomial([1], 0);
      for (var i = 0; i < errorCorrectLength; i += 1) {
        a = a.multiply(QRPolynomial([1, QRMath.gexp(i)], 0));
      }
      return a;
    },
    getLengthInBits: function(mode, type) {
      if (1 <= type && type < 10) return 8; // 8-bit bytes length bits for version 1-9
      return 16;
    },
    getLostPoint: function(qrCode) {
      var moduleCount = qrCode.getModuleCount();
      var lostPoint = 0;

      // level 1
      for (var row = 0; row < moduleCount; row++) {
        for (var col = 0; col < moduleCount; col++) {
          var sameCount = 0;
          var dark = qrCode.isDark(row, col);

          for (var r = -1; r <= 1; r++) {
            if (row + r < 0 || moduleCount <= row + r) continue;
            for (var c = -1; c <= 1; c++) {
              if (col + c < 0 || moduleCount <= col + c) continue;
              if (r == 0 && c == 0) continue;
              if (dark == qrCode.isDark(row + r, col + c)) sameCount++;
            }
          }
          if (sameCount > 5) lostPoint += (3 + sameCount - 5);
        }
      }

      // level 2
      for (var row = 0; row < moduleCount - 1; row++) {
        for (var col = 0; col < moduleCount - 1; col++) {
          var count = 0;
          if (qrCode.isDark(row, col)) count++;
          if (qrCode.isDark(row + 1, col)) count++;
          if (qrCode.isDark(row, col + 1)) count++;
          if (qrCode.isDark(row + 1, col + 1)) count++;
          if (count == 0 || count == 4) lostPoint += 3;
        }
      }

<script>
  // ====== Quick config (edit if needed) ======
  const FULL_NAME = "Greg Buckner";
  const ORG = "Select Source Water";
  const TITLE = "Water Specialist";
  const PHONE_E164 = "+1-209-769-4750";
  const EMAIL = "Bucknergreg86@gmail.com";
  const URL_SITE = "https://selectsourcewater.com";
  const VCF_FILENAME = "Greg_Buckner_SelectSourceWater.vcf";

  // ====== Save Contact (.vcf) ======
  function buildVCF(){
    return `BEGIN:VCARD
VERSION:3.0
N:Buckner;Greg;;;
FN:${FULL_NAME}
ORG:${ORG}
TITLE:${TITLE}
TEL;TYPE=CELL:${PHONE_E164}
EMAIL;TYPE=INTERNET:${EMAIL}
URL:${URL_SITE}
END:VCARD`;
  }

  const saveBtn = document.getElementById("saveContactBtn");
  if (saveBtn){
    saveBtn.addEventListener("click", () => {
      const vcf = buildVCF();
      const blob = new Blob([vcf], { type: "text/vcard" });
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = VCF_FILENAME;
      document.body.appendChild(a);
      a.click();
      a.remove();
      URL.revokeObjectURL(url);

      const old = saveBtn.innerHTML;
      saveBtn.innerHTML = `<svg viewBox="0 0 24 24"><path d="M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4z"/></svg> Saved`;
      setTimeout(()=> saveBtn.innerHTML = old, 1200);
    });
  }

  // ====== Smart Phone Chooser (bottom-sheet) ======
  const overlay = document.getElementById("overlay");
  const sheet = document.getElementById("sheet");
  const phoneTile = document.getElementById("phoneTile");
  const closeSheetBtn = document.getElementById("closeSheetBtn");

  function openSheet(){
    if (!overlay || !sheet) return;
    overlay.classList.add("open");
    sheet.classList.add("open");
    overlay.setAttribute("aria-hidden", "false");
    document.body.style.overflow = "hidden";
  }

  function closeSheet(){
    if (!overlay || !sheet) return;
    overlay.classList.remove("open");
    sheet.classList.remove("open");
    overlay.setAttribute("aria-hidden", "true");
    document.body.style.overflow = "";
  }

  if (phoneTile) phoneTile.addEventListener("click", openSheet);
  if (overlay) overlay.addEventListener("click", closeSheet);
  if (closeSheetBtn) closeSheetBtn.addEventListener("click", closeSheet);

  // ====== QR Popup (separate overlay) ======
  const qrPopupBtn = document.getElementById("qrPopupBtn");
  const qrOverlay = document.getElementById("qrOverlay");
  const qrSheet = document.getElementById("qrSheet");
  const qrCloseBtn = document.getElementById("qrCloseBtn");
  const qrUrlEl = document.getElementById("qrUrl");
  const qrCanvas = document.getElementById("qrCanvas");
  const qrDownloadBtn = document.getElementById("qrDownloadBtn");

  function openQR(){
    if (!qrOverlay || !qrSheet || !qrUrlEl || !qrCanvas) return;

    const url = window.location.origin + window.location.pathname; // cleaner than href
    qrUrlEl.textContent = url;

    qrOverlay.classList.add("open");
    qrSheet.classList.add("open");
    qrOverlay.setAttribute("aria-hidden", "false");
    document.body.style.overflow = "hidden";

    const qr = qrcode(0, "M"); // auto type
    qr.addData(url);
    qr.make();

    drawQR(qrCanvas, qr, { scale: 10, quiet: 4, bg:"#ffffff", fg:"#000000" });
  }

  function closeQR(){
    if (!qrOverlay || !qrSheet) return;
    qrOverlay.classList.remove("open");
    qrSheet.classList.remove("open");
    qrOverlay.setAttribute("aria-hidden", "true");
    document.body.style.overflow = "";
  }

  if (qrPopupBtn) qrPopupBtn.addEventListener("click", openQR);

  if (qrOverlay){
    qrOverlay.addEventListener("click", (e) => {
      if (e.target === qrOverlay) closeQR();
    });
  }

  if (qrCloseBtn) qrCloseBtn.addEventListener("click", closeQR);

  document.addEventListener("keydown", (e) => {
    if (e.key === "Escape"){
      closeSheet();
      if (qrSheet && qrSheet.classList.contains("open")) closeQR();
    }
  });

  if (qrDownloadBtn){
    qrDownloadBtn.addEventListener("click", () => {
      const url = window.location.origin + window.location.pathname;
      downloadQR(url);
    });
  }

  function downloadQR(url){
    const temp = document.createElement("canvas");

    const qr = qrcode(0, "M");
    qr.addData(url);
    qr.make();

    drawQR(temp, qr, { scale: 10, quiet: 4, bg:"#ffffff", fg:"#000000" });

    const a = document.createElement("a");
    a.href = temp.toDataURL("image/png");
    a.download = `${FULL_NAME.replace(/\s+/g,'_')}_QR.png`;
    document.body.appendChild(a);
    a.click();
    a.remove();
  }

  // ====== Draw helper (canvas) ======
  function drawQR(canvas, qr, opts){
    const ctx = canvas.getContext("2d");
    const count = qr.getModuleCount();
    const quiet = opts.quiet ?? 4;
    const scale = opts.scale ?? 10;
    const size = (count + quiet*2) * scale;

    canvas.width = size;
    canvas.height = size;

    ctx.fillStyle = opts.bg ?? "#fff";
    ctx.fillRect(0,0,size,size);

    ctx.fillStyle = opts.fg ?? "#000";
    for (let r=0; r<count; r++){
      for (let c=0; c<count; c++){
        if (qr.isDark(r,c)){
          ctx.fillRect((c+quiet)*scale, (r+quiet)*scale, scale, scale);
        }
      }
    }
  }

  // ====== Auto-hide floating quick buttons when main actions are visible ======
  const quick = document.getElementById("quick");
  const actions = document.getElementById("actions");

  if ("IntersectionObserver" in window && actions && quick){
    const io = new IntersectionObserver((entries) => {
      const entry = entries[0];
      if (entry.isIntersecting && entry.intersectionRatio > 0.08){
        quick.classList.add("hidden");
      } else {
        quick.classList.remove("hidden");
      }
    }, { threshold: [0, 0.08, 0.2] });

    io.observe(actions);
  }

  /* ============================================================
     qrcode-generator (MIT) - embedded (minimal versions)
     https://github.com/kazuhikoarase/qrcode-generator
     ============================================================ */
  (function(global){
    // --- tiny wrapper: we only need qrcode(0,"M"), addData, make, isDark, getModuleCount ---
    // This is the standard “qrcode-generator” build signature.
    // NOTE: This block is intentionally small for your use-case.
    // If you already have the full library pasted elsewhere, don’t paste this again.

    // If qrcode already exists, don't redefine it:
    if (global.qrcode) return;

    /* Paste your existing qrcode-generator library here ONCE.
       (Use the exact full library block you already pasted, but WITHOUT any <script> tags.)
       If you want, send me just the part from "(function(global){" down to "})(window);" and
       I’ll compress it cleanly for your file.
    */
  })(window);
  
</script>
</body>
</html>
